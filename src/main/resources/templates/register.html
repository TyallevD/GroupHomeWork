<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<div class="registration-container">
    <h2>Регистрация пользователя</h2>
    <form id="registration-form" th:action="@{/register}" th:object="${userRegistrationDTO}" method="post">

        <!-- Общие ошибки (уникальность и т.д.) -->
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>


        <!-- Ошибки валидации DTO -->
        <div th:if="${#fields.hasErrors('*')}" class="validation-errors">
            <strong>Исправьте следующие ошибки:</strong>
            <ul>
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
            </ul>
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" th:field="*{email}" placeholder="Введите email"
                   th:classappend="${#fields.hasErrors('email')} ? 'field-error' : ''" required>
            <div th:if="${#fields.hasErrors('email')}" class="error-message" th:errors="*{email}"></div>
        </div>

        <div class="form-group">
            <label for="username">Имя пользователя</label>
            <input type="text" id="username" name="username" th:field="*{username}"
                   placeholder="Введите имя пользователя"
                   th:classappend="${#fields.hasErrors('username')} ? 'field-error' : ''" required>
            <div th:if="${#fields.hasErrors('username')}" class="error-message" th:errors="*{username}"></div>
        </div>

        <div class="form-group">
            <label for="password">Пароль</label>
            <input type="password" id="password" name="password" th:field="*{password}" placeholder="Введите пароль"
                   th:classappend="${#fields.hasErrors('password')} ? 'field-error' : ''" required>
            <div th:if="${#fields.hasErrors('password')}" class="error-message" th:errors="*{password}"></div>
        </div>

        <div class="form-group">
            <label for="confirmPassword">Подтверждение пароля</label>
            <input type="password" id="confirmPassword" name="confirmPassword" th:field="*{confirmPassword}"
                   placeholder="Повторите пароль"
                   th:classappend="${#fields.hasErrors('confirmPassword')} ? 'field-error' : ''" required>
            <div th:if="${#fields.hasErrors('confirmPassword')}" class="error-message"
                 th:errors="*{confirmPassword}"></div>
        </div>

        <div class="button-group">
            <a th:href="@{/index}">
                <button type="button" class="back-btn">Назад</button>
            </a>
            <button type="submit" class="register-btn">Зарегистрироваться</button>
        </div>
    </form>
</div>
</body>

</html>